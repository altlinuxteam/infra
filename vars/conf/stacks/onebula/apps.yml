---
one_params: &one_params
  one_default_admin_password: "bebebe"
  one_server_entrypoint_address: "10.64.84.240"
  one_server_entrypoint_port: "2633"
  one_management_host: "ones0"

  one_cluster_name: "srt"
  one_groups:
    - "devs"
    - "automation"

apt_sources_from_tasks: []

apps:
- # step1
  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: server
    binds:
    - "ones0"

  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: management
    binds:
    - "ones0"

  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: sunstone
    binds:
    - "ones0"

- # step 2
  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: "worker-kvm"
    binds:
    - "onew0"
    - "onew1"
    - "onew2"

- # step3 distribute keys among nodes
  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: distribute_keys
    binds:
    - "ones0"
    - "onew0"
    - "onew1"
    - "onew2"
