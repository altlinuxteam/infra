---
one_params: &one_params
  one_default_admin_password: "bebebe"
  one_server_entrypoint_address: "10.64.84.250"
  one_server_entrypoint_port: "2633"

  one_cluster_name: "srt"
  one_management_host: "one0"
  one_groups:
    - "devs"
    - "automation"

apt_sources_from_tasks: []

apps:
- # step1
  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: server
    binds:
    - "one0"

  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: management
    binds:
    - "one0"
- # step2
  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: "worker-kvm"
    binds:
    - "one0"

- # step3
  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: sunstone
    binds:
    - "one0"

- # step4 distribute keys among nodes
  - name: opennebula
    vars:
      <<: *one_params
      one_flavor: distribute_keys
    binds:
    - "one0"
