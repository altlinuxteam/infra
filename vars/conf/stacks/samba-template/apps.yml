---
samba_parameters: &samba_params
  samba_realm: "domain.alt" #"{{stack.domain}}"
  samba_domain: "domain" #"{{stack.domain.split('.')[0]}}"
  samba_admin_pass: peebieY4
  samba_dns_forward: 8.8.8.8
  samba_dns_backend: SAMBA_INTERNAL
  samba_master_hostname: e2k0 # need to get it automatically somehow
  samba_master_address: 10.64.6.1 # need to get it automatically somehow
  samba_network: 10.64.6.0/24 # need to determine which interface should be used for samba connection

apps:
- # step1
  - name: samba
    vars:
      <<: *samba_params
      samba_flavor: master
    binds:
    - "dc0"

- #step2
  - name: samba
    vars:
      <<: *samba_params
      samba_flavor: replica
    binds:
    - "dc1"
    - "dc2"

  - name: samba
    vars:
      <<: *samba_params
      samba_flavor: client
    binds: [ "cl0", "cl1", "cl2" ]
